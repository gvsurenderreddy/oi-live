# vim: set ft=sh:

. /usr/lib/initcpio/oi-live-misc

build()
{

    map add_module $OI_SUPPORTED_FS
    add_module fuse
    add_module squashfs
    add_module aufs
    add_checked_modules fs/nls

    add_file /usr/lib/initcpio/oi-live-misc /oi-live-misc
    add_dir /mnt
    add_binary ntfs-3g
    add_binary /usr/lib/initcpio/ntfs-3g-initrd-wrapper /usr/bin/ntfs-3g-initrd-wrapper
    add_binary udp-receiver
    add_runscript

    # proper shutdown support
    add_binary cp
    add_binary lsblk
    add_binary findmnt
    add_file /usr/lib/initcpio/shutdown-oi-live /shutdown 755
    add_file /usr/lib/initcpio/shutdown /shutdown-arch 755
}

help()
{
cat<<HELPEOF
  This hook sets up OI-Live. It depends on the following hooks:
  net (has to be specified before this one)
  fsck
HELPEOF
}
